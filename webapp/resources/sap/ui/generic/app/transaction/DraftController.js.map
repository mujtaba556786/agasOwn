{"version":3,"file":"DraftController.js","names":["sap","ui","define","jQuery","BaseController","DraftContext","Log","Context","ActionUtil","DraftController","extend","metadata","publicMethods","constructor","oModel","oQueue","apply","this","sName","_oContext","prototype","getDraftContext","_oModel","createDraft","sEntitySet","sPath","mParameters","that","Error","Promise","resolve","reject","fnSuccess","oData","oResponse","responseData","httpResponse","createdContext","fnError","oError","deleteCreatedEntry","createEntry","properties","predefinedValues","success","error","batchGroupId","changeSetId","canonicalRequest","expand","validateDraft","oContext","getModel","getObject","getPath","IsActiveEntity","oImport","getODataDraftFunctionImportName","_callAction","prepareDraft","urlParameters","activateDraft","oPrepareParameters","oActivateParameters","pPrepare","pActivate","all","editDraft","sImportName","discardDraft","mParam","sFunctionImport","_remove","getDraftForActive","$expand","_read","then","hasOwnProperty","context","getContext","getKey","SiblingEntity","getDraftForActiveEntity","oPromise","oPromise2","noShowSuccessToast","forceSubmit","_normalizeError","triggerSubmitChanges","_returnPromiseAll","createNewDraftEntity","vPredefinedValues","bCanonicalRequest","oParameters","fnSetBusy","Function","sId4BatchGroupAndChangeSet","mParameters1","sRootExpand","oFunctionImport","_oMeta","getODataFunctionImport","oPromise0","fnGetLabelFromLineItemAnnotation","bUseNewActionForCreate","aLineItemAnnotation","getODataEntityType","getODataEntitySet","entityType","oItem","find","RecordType","Action","String","sLabel","Label","oLibraryResourceBundle","getCore","getLibraryResourceBundle","sFunctionImportDialogTitleText","oFunctionImportDialogInfo","getTitleText","getText","sFunctionImportDialogActionButtonText","getActionButtonText","oSkipProperties","ResultIsActiveEntity","bIsDraft","isDraftEnabled","oActionProcessor","controller","oController","contexts","applicationController","oApplicationController","operationGrouping","undefined","mAdditionalParamData","call","executionPromise","oPromise1","aResponse","Array","isArray","_normalizeResponse","response","oResponseOut","fnPromise1Callback","bIsActiveEntity","bHasDraftEntity","oResponseEntity","_oDraftUtil","isActiveEntity","hasDraftEntity","mParameters2","failedMsg","createEditDraftEntity","bPreserveChanges","successMsg","PreserveChanges","validateDraftEntity","saveAndPrepareDraftEntity","binding","refresh","prepareDraftEntity","activateDraftEntity","bIsLenient","sExpand","oActivateDraftPromise","oTriggerSubmitPromise","sHandling","headers","Prefer","sETag","getETag","oActivationPromise","fnResolve","fnReject","fnCallerFunc","detachOnQueueCompleted","aResponses","_oQueue","_aQueue","length","attachOnQueueCompleted","hasDraft","hasActiveEntity","destroy"],"sources":["DraftController-dbg.js"],"mappings":"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"}