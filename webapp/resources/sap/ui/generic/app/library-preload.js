//@ui5-bundle sap/ui/generic/app/library-preload.js
/*
 * ! SAPUI5

(c) Copyright 2009-2020 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/ui/generic/app/AppComponent", ["sap/suite/ui/generic/template/lib/AppComponent"],function(e){"use strict";return e},true);
/*
 * SAPUI5

(c) Copyright 2009-2020 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/ui/generic/app/ApplicationController", ["sap/ui/thirdparty/jquery","./transaction/BaseController","./transaction/TransactionController","sap/ui/generic/app/util/ModelUtil","sap/base/Log"],function(jQuery,e,t,r,i){"use strict";var o=e.extend("sap.ui.generic.app.ApplicationController",{constructor:function(t,r){e.apply(this,[t]);this._oGroupChanges={};this.sName="sap.ui.generic.app.ApplicationController";this._initModel(t);this.registerView(r)}});o.prototype.propertyChanged=function(e,t){var i=this,o={batchGroupId:"Changes",changeSetId:"Changes",onlyIfPending:true,noShowResponse:true,noBlockUI:true,draftSave:true},a,n={};if(t&&t instanceof sap.ui.model.Context){var s=r.getEntitySetFromContext(t);var u=t.getModel().getMetaModel();var f=u.getODataEntitySet(s).entityType;n=u.getODataEntityType(f)}for(var c in n){if(c.startsWith("com.sap.vocabularies.Common.v1.SideEffects")){a=n[c];if(a.SourceProperties&&a.SourceProperties.length){for(var l=0;l<a.SourceProperties.length;l++){if(a.SourceProperties[l].PropertyPath===e){i.registerGroupChange(i._getSideEffectsQualifier(c))}}}}}return new Promise(function(e,t){setTimeout(function(){i.triggerSubmitChanges(o).then(function(t){e(t)},function(e){t(e)})})})};o.prototype.registerGroupChange=function(e){this._oGroupChanges[e]=true};o.prototype.registerView=function(e){var t=this;if(e){this._fnAttachValidateFieldGroup=function(r){var i,o,a,n,s=[];var u=this.getBindingContext();if(!u){return false}if(!t.getTransactionController().getDraftController().getDraftContext().hasDraft(u)){this.detachValidateFieldGroup(t._fnAttachValidateFieldGroup);return false}if(r.mParameters.fieldGroupIds){a=r.mParameters.fieldGroupIds.length}for(n=0;n<a;n++){i=r.mParameters.fieldGroupIds[n];o=e.data(i);if(o){s.push({uuid:i,objid:o})}}t._onValidateFieldGroup(s,e)};e.attachValidateFieldGroup(this._fnAttachValidateFieldGroup)}};o.prototype._initModel=function(e){if(e.getDefaultBindingMode()!==sap.ui.model.BindingMode.TwoWay){i.error("ApplicationController: The model's DefaultBindingMode wasn't but is now set to 'TwoWay'.");e.setDefaultBindingMode(sap.ui.model.BindingMode.TwoWay)}if(e.getRefreshAfterChange()!==false){i.error("ApplicationController: The model's setting 'RefreshAfterChange' wasn't but is now set to 'false'.");e.setRefreshAfterChange(false)}e.setDeferredBatchGroups(["Changes"]);e.setChangeBatchGroups({"*":{batchGroupId:"Changes",changeSetId:"Changes",single:false}})};o.prototype._onValidateFieldGroup=function(e,t){var r,i=e.length,o,a={bGlobal:false,aRequests:[],bHasTargets:true},n=[],s=this;for(r=0;r<i;r++){n.push(this._executeFieldGroup(e[r],a,t).then(function(){return true},function(){return false}))}var u=function(e){if(e.find(function(e){return e})){i=a.aRequests.length;for(r=0;r<i;r++){o=a.aRequests[r];o(a.bGlobal)}if(a.bGlobal){s._oModel.refresh(true,false,"Changes")}var t=s.triggerSubmitChanges({batchGroupId:"Changes",noShowSuccessToast:true,forceSubmit:true,noBlockUI:true,urlParameters:{},draftSave:s._oModel.hasPendingChanges(true)});s.fireEvent("beforeSideEffectExecution",{promise:t});return t}};return Promise.all(n).then(u)};o.prototype._executeFieldGroup=function(e,t,r){var i,o,a,n={batchGroupId:"Changes",changeSetId:"SideEffects",noShowSuccessToast:true,forceSubmit:true,noBlockUI:true,urlParameters:{}},s=this;i=this._getSideEffectsQualifier(e.objid.name);n.urlParameters.SideEffectsQualifier=i;o=e.objid.contextObject;a=this._getSideEffect(e.objid);return this._hasClientErrors(e.uuid,r).then(function(){if(!s._oGroupChanges[i]){return Promise.reject()}s._oGroupChanges[i]=false;s._executeSideEffects(a,o,n,t)})};o.prototype._getSideEffectsQualifier=function(e){var t=e.replace("com.sap.vocabularies.Common.v1.SideEffects","");if(t.indexOf("#")===0){t=t.replace("#","")}return t};o.prototype._executeSideEffectsForActions=function(e,t,r){var i;var o="_it/";var a={bGlobal:false,aRequests:[],bHasTargets:true};var n={batchGroupId:"Changes",changeSetId:"SideEffects",noShowSuccessToast:true,forceSubmit:true,noBlockUI:true,urlParameters:{}};var s=0;if(r===false){n.batchGroupId="NonDraftChanges"}if(e.TargetEntities&&e.TargetEntities.length){for(s=0;s<e.TargetEntities.length;s++){if(e.TargetEntities[s].NavigationPropertyPath.indexOf(o)===0){e.TargetEntities[s].NavigationPropertyPath=e.TargetEntities[s].NavigationPropertyPath.substr(4)}}}var u=function(e,t){var r=e[t];if(r&&r.startsWith(o)){e[t]=r.substr(4)}};(e.TargetProperties||[]).forEach(function(e){["PropertyPath","String"].forEach(u.bind(null,e))});for(s=0;s<t.length;s++){this._executeSideEffects(e,t[s],n,a);if(a.aRequests[0]){i=a.aRequests[0];i(a.bGlobal);a.aRequests=[]}}if(a.bGlobal){this._oModel.refresh(true,false,n.batchGroupId)}};o.prototype._executeSideEffects=function(e,t,r,i){var o=this,a,n,s;var u=o.getTransactionController().getDraftController();var f=u.getDraftContext().hasDraft(t);if(e.TriggerAction&&e.TriggerAction.String&&f){n=e.TriggerAction.String}this._setSelect(e,r,i,t);s=i.bHasTargets;a=function(e,i){if(n){var a=o._oModel.getETag(t.getPath());if(a){r.headers={"If-Match":"*"}}o._callAction(n,t,r)}else if(i&&i.callPreparationOnDraftRoot&&f){delete r.urlParameters.SideEffectsQualifier;u.prepareDraft(i.draftRootContext,r)}if(!e&&s){var c=jQuery.extend({},r);c.context=t;o._read("",c,true)}};i.aRequests.push(a)};o.prototype._hasClientErrors=function(e,t){var r,i=[];r=t.getControlsByFieldGroupId(e);r.forEach(function(e){var t=e.getParent();var r={handleSuccess:false};i.push(t&&t.checkValuesValidity&&t.checkValuesValidity(r))});return Promise.all(i)};o.prototype._setSelect=function(e,t,i,o){var a,n=0,s,u=[],f=[],c=[],l;if(!i.bGlobal){if((!e.TargetEntities||e.TargetEntities.length===0)&&(!e.TargetProperties||e.TargetProperties.length===0)){i.bHasTargets=false;return}if(e.TargetEntities){n=e.TargetEntities.length;if(n>0){for(a=0;a<n;a++){s=e.TargetEntities[a];if(s.NavigationPropertyPath===""){u.push("*")}else{u.push(s.NavigationPropertyPath);if(f.indexOf(s.NavigationPropertyPath)===-1){f.push(s.NavigationPropertyPath)}}c.push(s.NavigationPropertyPath)}}}if(e.TargetProperties){n=e.TargetProperties.length;if(n>0){for(a=0;a<n;a++){s=e.TargetProperties[a];l="";if(s.PropertyPath?s.PropertyPath.indexOf("/")!==-1:s.String.indexOf("/")!==-1){var h=r.getEntitySetFromContext(o);var g=this._oModel.getMetaModel();var p=g.getODataEntitySet(h).entityType;var d=g.getODataEntityType(p);var v=s.PropertyPath?s.PropertyPath.split("/"):s.String.split("/");var S;if(v.length>1){for(var m=0;m<v.length-1;m++){S=g.getODataAssociationEnd(d,v[m]);if(S){d=g.getODataEntityType(S.type);if(l){l=l+"/"}l=l+v[m]}else{break}}}}if(c.indexOf(l)===-1){if(l&&f.indexOf(l)===-1){f.push(l)}u.push(s.PropertyPath||s.String)}}}}}if(u.length>0){t.readParameters={$select:u.join(",")};if(f.length>0){t.readParameters["$expand"]=f.join(",")}}};o.prototype._getSideEffect=function(e){var t,r,i,o;t=this._oModel.getMetaModel();i="getOData"+e.originType.substring(0,1).toUpperCase()+e.originType.substring(1);if(e.originNamespace){o=e.originNamespace+"."+e.originName}else{o=e.originName}if(t[i]){r=t[i](o);if(r){return r[e.name]}}throw"Unknown SideEffect originType: "+e.originType};o.prototype.getTransactionController=function(){if(!this._oTransaction){this._oTransaction=new t(this._oModel,this._oQueue,{noBatchGroups:true})}return this._oTransaction};o.prototype.invokeActions=function(e,t,r){var i,o,a,n,s=[],u;r=r||{};a=t.length;n=this._getChangeSetFunc(t,r.operationGrouping);if(a===0){s.push(this._invokeAction(e,null,null,r))}else{for(o=0;o<a;o++){s.push(this._invokeAction(e,t[o],n(o),r))}}var f=this._oModel.getMetaModel().getODataFunctionImport(e.split("/")[1]);for(var c in f){if(c.startsWith("com.sap.vocabularies.Common.v1.SideEffects")){u=f[c];break}}if(u){this._executeSideEffectsForActions(u,t,r.triggerChanges)}if(r.triggerChanges!==false){r={batchGroupId:"Changes",changeSetId:"Action"+n(o+1),successMsg:"Call of action succeeded",failedMsg:"Call of action failed",forceSubmit:true,context:i};s.push(this.triggerSubmitChanges(r))}var l=this;return this._newPromiseAll(s).then(function(e){var i=false;if(e&&r.triggerChanges!==false&&e.length>t.length){e.pop()}i=l._checkAtLeastOneSuccess(t,e);if(i){return e}else{return Promise.reject(e)}})};o.prototype.executeSideEffects=function(e,t,i,o,a){var n,s,u,f,c,l;var h=false;var g=!t&&!i;var p={bGlobal:false,aRequests:[],bHasTargets:true};var d={batchGroupId:"Changes",changeSetId:"SideEffects",noShowSuccessToast:true,forceSubmit:true,noBlockUI:true,urlParameters:{}};var v=r.getEntitySetFromContext(e);var S=e.getModel().getMetaModel();var m=S.getODataEntitySet(v).entityType;var C=S.getODataEntityType(m);var b=0;o=!(o===false);i=i||[];t=t||[];var y=function(t){if(l){d.urlParameters.SideEffectsQualifier=l}else{delete d.urlParameters.SideEffectsQualifier}this._executeSideEffects(t,e,d,p);if(p.aRequests[0]){c=p.aRequests[0];c(p.bGlobal,a);p.aRequests=[]}}.bind(this);for(var P in C){if(P.startsWith("com.sap.vocabularies.Common.v1.SideEffects")){n=C[P];f=false;l=this._getSideEffectsQualifier(P);if(g){if(!n.SourceProperties&&!n.SourceEntities){y(n);f=true;h=true;break}}else{if(n.SourceEntities&&n.SourceEntities.length){for(b=0;b<n.SourceEntities.length;b++){s=n.SourceEntities[b].NavigationPropertyPath;if(i.indexOf(s)!==-1){f=true}}}if(!f&&n.SourceProperties&&n.SourceProperties.length){for(b=0;b<n.SourceProperties.length;b++){u=n.SourceProperties[b].PropertyPath;if(t.indexOf(u)!==-1){f=true}}}if(f){y(n);h=true}}}}if(g&&!f){y({});h=true}if(o&&!p.bHasTargets){this._oModel.refresh(true,false,"Changes");h=true}var E=null;if(h){E=this.triggerSubmitChanges({batchGroupId:"Changes",noShowSuccessToast:true,forceSubmit:true,noBlockUI:true,urlParameters:{},draftSave:this._oModel.hasPendingChanges(true)})}else{E=Promise.resolve()}this.fireEvent("beforeSideEffectExecution",{promise:E});return E};o.prototype._checkAtLeastOneSuccess=function(e,t){var r,i=false;if(e.length<=t.length){for(r=0;r<e.length;r++){t[r].actionContext=e[r];if(!t[r].error){i=true}}if(e.length===0){for(r=0;r<t.length;r++){if(!t[r].error){i=true}}}}return i};o.prototype._newPromiseAll=function(e){var t=[];var r=Promise.resolve(null);e.forEach(function(e){r=r.then(function(){return e}).then(function(e){t.push({response:e})},function(e){t.push({error:e})})});return r.then(function(){return Promise.resolve(t)})};o.prototype._getChangeSetFunc=function(e,t){var r=e.length;var i=function(){return"Changes"};if(r===1){return i}if(t==="com.sap.vocabularies.UI.v1.OperationGroupingType/ChangeSet"){return i}return function(e){return"Changes"+e}};o.prototype.getNewActionContext=function(e,t,r){var i=this;r=jQuery.extend({batchGroupId:"Changes",changeSetId:"SingleAction",successMsg:"Call of action succeeded",failedMsg:"Call of action failed",forceSubmit:true,context:t,functionImport:this._oMeta.getODataFunctionImport(e.split("/")[1])},r);var o=this._createFunctionContext(t,r);o.result=o.result.then(function(e){return i._normalizeResponse(e,true)},function(e){var t=i._normalizeError(e);throw t});return o};o.prototype.submitActionContext=function(e,t,r){var i;var o=this._oModel.getMetaModel().getODataFunctionImport(r);for(var a in o){if(a.startsWith("com.sap.vocabularies.Common.v1.SideEffects")){i=o[a];break}}if(i){this._executeSideEffectsForActions(i,[e])}this.triggerSubmitChanges({batchGroupId:"Changes",successMsg:"Call of action succeeded",failedMsg:"Call of action failed",forceSubmit:true,context:t})};o.prototype._invokeAction=function(e,t,r,i){var o=this;var a=Object.assign({},i.headers);var n=Object.assign({},i.urlParameters);var s={batchGroupId:"Changes",changeSetId:r,successMsg:"Call of action succeeded",failedMsg:"Call of action failed",urlParameters:n,forceSubmit:true,context:t,headers:a};if(i.triggerChanges===false){s.batchGroupId="NonDraftChanges"}return this._callAction(e,t,s).then(function(e){return o._normalizeResponse(e,true)},function(e){var t=o._normalizeError(e);throw t})};o.prototype.destroy=function(){e.prototype.destroy.apply(this,[]);if(this._oTransaction){this._oTransaction.destroy()}this._oModel=null;this._oTransaction=null;this._oGroupChanges=null};return o},true);
/*!
 * SAPUI5

(c) Copyright 2009-2020 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/ui/generic/app/library", ["sap/ui/core/Core","sap/ui/core/library","sap/m/library","sap/fe/navigation/library"],function(a){"use strict";var e=a.initLibrary({name:"sap.ui.generic.app",version:"1.109.0",dependencies:["sap.ui.core","sap.m","sap.fe.navigation"],types:["sap.ui.generic.app.navigation.service.NavType","sap.ui.generic.app.navigation.service.ParamHandlingMode","sap.ui.generic.app.navigation.service.SuppressionBehavior"],interfaces:[],controls:[],elements:[],noLibraryCSS:true});e.navigation.service.ParamHandlingMode={SelVarWins:"SelVarWins",URLParamWins:"URLParamWins",InsertInSelOpt:"InsertInSelOpt"};e.navigation.service.NavType={initial:"initial",URLParams:"URLParams",xAppState:"xAppState",iAppState:"iAppState"};e.navigation.service.SuppressionBehavior={standard:0,ignoreEmptyString:1,raiseErrorOnNull:2,raiseErrorOnUndefined:4};sap.ui.lazyRequire("sap.ui.generic.app.AppComponent","new extend getMetadata");return e});
/*!
 * SAPUI5

(c) Copyright 2009-2020 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/ui/generic/app/navigation/service/NavError", ["sap/fe/navigation/NavError"],function(r){"use strict";var e=r.extend("sap.ui.generic.app.navigation.service.NavError",{metadata:{publicMethods:["getErrorCode"],properties:{},library:"sap.ui.generic.app"},constructor:function(e){r.apply(this);this._sErrorCode=e}});e.prototype.getErrorCode=function(){return this._sErrorCode};return e});
/*
 * ! SAPUI5

(c) Copyright 2009-2020 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/ui/generic/app/navigation/service/NavigationHandler", ["sap/fe/navigation/NavigationHandler","sap/fe/navigation/library","./NavError","./SelectionVariant","sap/ui/generic/app/library"],function(t,e,r,n){"use strict";var a=t.extend("sap.ui.generic.app.navigation.service.NavigationHandler",{metadata:{publicMethods:["navigate","parseNavigation","storeInnerAppState","openSmartLinkPopover","mixAttributesAndSelectionVariant","setModel"]},constructor:function(n,a){try{t.apply(this,[n,e.Mode.ODataV2,a])}catch(t){if(t){throw new r(t._sErrorCode)}}},navigate:function(e,n,a,o,i,p,c){try{var s=function(t,e){if(e){var n=new r(e._sErrorCode);if(t){t(n)}}};t.prototype.navigate.apply(this,[e,n,a,o,s.bind(this,i),p,c])}catch(t){if(t){throw new r(t._sErrorCode)}}},parseNavigation:function(){try{var e=jQuery.Deferred();var a=t.prototype.parseNavigation.apply(this);a.done(function(t,r,a){if(Object.keys(t).length){var o=t.oSelectionVariant;var i=t.oDefaultedSelectionVariant;t.oSelectionVariant=o&&new n(o.toJSONObject());t.oDefaultedSelectionVariant=i&&new n(i.toJSONObject());var p=t.oDefaultedSelectionVariant;if(p&&p.getText()==="Selection Variant with ID "+p.getID()){delete t.oDefaultedSelectionVariant._sText}}e.resolve(t,r,a)});a.fail(function(t,n,a){var o=new r(t._sErrorCode);e.reject(o,n,a)});return e.promise()}catch(t){if(t){throw new r(t._sErrorCode)}}},setTechnicalParameters:function(e){try{t.prototype.setTechnicalParameters.apply(this,[e])}catch(t){if(t){throw new r(t._sErrorCode)}}},getTechnicalParameters:function(){return t.prototype.getTechnicalParameters.apply(this)},replaceHash:function(e){t.prototype.replaceHash.apply(this,[e])},storeInnerAppState:function(e,r){return t.prototype.storeInnerAppState.apply(this,[e,r])},storeInnerAppStateWithImmediateReturn:function(e,r){return t.prototype.storeInnerAppStateWithImmediateReturn.apply(this,[e,r])},processBeforeSmartLinkPopoverOpens:function(e,r,n,a){return t.prototype.processBeforeSmartLinkPopoverOpens.apply(this,[e,r,n,a])},mixAttributesAndSelectionVariant:function(e,n,a){try{var o=t.prototype.mixAttributesAndSelectionVariant.apply(this,[e,n,a]);return new sap.ui.generic.app.navigation.service.SelectionVariant(o.toJSONObject())}catch(t){if(t){throw new r(t._sErrorCode)}}},setModel:function(e){t.prototype.setModel.apply(this,[e])},constructContextUrl:function(e,n){try{return t.prototype.constructContextUrl.apply(this,[e,n])}catch(t){if(t){throw new r(t._sErrorCode)}}}});return a});
/*!
 * SAPUI5

(c) Copyright 2009-2020 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/ui/generic/app/navigation/service/PresentationVariant", ["sap/fe/navigation/PresentationVariant","./NavError"],function(t,e){"use strict";var o=t.extend("sap.ui.generic.app.navigation.service.PresentationVariant",{constructor:function(o){try{t.apply(this,[o])}catch(t){if(t){throw new e(t._sErrorCode)}}},getID:function(){return t.prototype.getID.apply(this)},setID:function(e){t.prototype.setID.apply(this,[e])},setText:function(o){try{t.prototype.setText.apply(this,[o])}catch(t){if(t){throw new e(t._sErrorCode)}}},getText:function(){return t.prototype.getText.apply(this)},setContextUrl:function(o){try{t.prototype.setContextUrl.apply(this,[o])}catch(t){if(t){throw new e(t._sErrorCode)}}},getContextUrl:function(){return t.prototype.getContextUrl.apply(this)},isEmpty:function(){return t.prototype.isEmpty.apply(this)},setProperties:function(e){t.prototype.setProperties.apply(this,[e])},getProperties:function(){return t.prototype.getProperties.apply(this)},setTableVisualization:function(e){t.prototype.setTableVisualization.apply(this,[e])},getTableVisualization:function(){return t.prototype.getTableVisualization.apply(this)},setChartVisualization:function(e){t.prototype.setChartVisualization.apply(this,[e])},getChartVisualization:function(){return t.prototype.getChartVisualization.apply(this)},toJSONObject:function(){return t.prototype.toJSONObject.apply(this)},toJSONString:function(){return t.prototype.toJSONString.apply(this)}});return o});
/*!
 * SAPUI5

(c) Copyright 2009-2020 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/ui/generic/app/navigation/service/SelectionVariant", ["sap/fe/navigation/SelectionVariant","./NavError"],function(t,e){"use strict";var r=t.extend("sap.ui.generic.app.navigation.service.SelectionVariant",{constructor:function(r){try{t.apply(this,[r])}catch(t){if(t){throw new e(t._sErrorCode)}}},getID:function(){return t.prototype.getID.apply(this)},setID:function(e){t.prototype.setID.apply(this,[e])},setText:function(r){try{t.prototype.setText.apply(this,[r])}catch(t){if(t){throw new e(t._sErrorCode)}}},getText:function(){return t.prototype.getText.apply(this)},setParameterContextUrl:function(r){try{t.prototype.setParameterContextUrl.apply(this,[r])}catch(t){if(t){throw new e(t._sErrorCode)}}},getParameterContextUrl:function(){return t.prototype.getParameterContextUrl.apply(this)},getFilterContextUrl:function(){return t.prototype.getFilterContextUrl.apply(this)},setFilterContextUrl:function(r){try{t.prototype.setFilterContextUrl.apply(this,[r])}catch(t){if(t){throw new e(t._sErrorCode)}}},addParameter:function(r,o){try{t.prototype.addParameter.apply(this,[r,o]);return this}catch(t){if(t){throw new e(t._sErrorCode)}}},removeParameter:function(r){try{t.prototype.removeParameter.apply(this,[r]);return this}catch(t){if(t){throw new e(t._sErrorCode)}}},renameParameter:function(r,o){try{t.prototype.renameParameter.apply(this,[r,o]);return this}catch(t){if(t){throw new e(t._sErrorCode)}}},getParameter:function(r){try{return t.prototype.getParameter.apply(this,[r])}catch(t){if(t){throw new e(t._sErrorCode)}}},getParameterNames:function(){return t.prototype.getParameterNames.apply(this)},addSelectOption:function(r,o,n,p,i){try{t.prototype.addSelectOption.apply(this,[r,o,n,p,i]);return this}catch(t){if(t){throw new e(t._sErrorCode)}}},removeSelectOption:function(r){try{t.prototype.removeSelectOption.apply(this,[r]);return this}catch(t){if(t){throw new e(t._sErrorCode)}}},renameSelectOption:function(r,o){try{t.prototype.renameSelectOption.apply(this,[r,o]);return this}catch(t){if(t){throw new e(t._sErrorCode)}}},getSelectOption:function(r){try{return t.prototype.getSelectOption.apply(this,[r])}catch(t){if(t){throw new e(t._sErrorCode)}}},getSelectOptionsPropertyNames:function(){return t.prototype.getSelectOptionsPropertyNames.apply(this)},getPropertyNames:function(){return t.prototype.getPropertyNames.apply(this)},massAddSelectOption:function(r,o){try{t.prototype.massAddSelectOption.apply(this,[r,o]);return this}catch(t){if(t){throw new e(t._sErrorCode)}}},getValue:function(r){try{return t.prototype.getValue.apply(this,[r])}catch(t){if(t){throw new e(t._sErrorCode)}}},isEmpty:function(){return t.prototype.isEmpty.apply(this)},toJSONObject:function(){return t.prototype.toJSONObject.apply(this)},toJSONString:function(){return t.prototype.toJSONString.apply(this)}});return r},true);
/*
 * SAPUI5

(c) Copyright 2009-2020 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/ui/generic/app/transaction/BaseController", ["sap/ui/base/EventProvider","sap/ui/generic/app/util/ModelUtil","sap/ui/generic/app/util/DraftUtil","sap/ui/generic/app/util/Queue","sap/base/Log"],function(e,t,r,o,s){"use strict";var n=e.extend("sap.ui.generic.app.transaction.BaseController",{metadata:{publicMethods:["hasClientMessages","triggerSubmitChanges","attachFatalError","detachFatalError","destroy"]},constructor:function(a,u){if(!a){throw new Error("No model")}if(a.bUseBatch==false){s.error("sap.ui.generic.app.transaction.BaseController: Only ODataModel with batch mode enabled are supported!");n.prototype.NonBatchEventHandlers={};a.attachRequestCompleted(function(e){var t=e.getParameters().ID;var r=n.prototype.NonBatchEventHandlers[t];if(r&&e.getParameters().success){r.success();delete n.prototype.NonBatchEventHandlers[t]}else if(r&&!e.getParameters().success){r.error();delete n.prototype.NonBatchEventHandlers[t]}})}e.apply(this,arguments);this.sName="sap.ui.generic.app.transaction.BaseController";this._oModel=a;this._oMeta=a.getMetaModel();this._oDraftUtil=new r;this._oModelUtil=new t(a);if(u){this._oQueue=u}else{this._oQueue=new o;this._bOwnsQueue=true}this._initCounts()}});n.prototype.attachFatalError=function(e,t){this.attachEvent("fatalError",e,t)};n.prototype.detachFatalError=function(e,t){this.detachEvent("fatalError",e,t)};n.prototype._prepareCallAction=function(e,r,o){var s,n,a,u,i;if(!e){throw new Error("Invalid Function Import")}o.urlParameters=o.urlParameters||{};o.functionImport=this._oMeta.getODataFunctionImport(e.split("/")[1]);if(!o.functionImport){throw new Error("Unknown Function Import "+e)}if(r){u=t.getEntitySetFromContext(r);s=this._oMeta.getODataEntitySet(u,false);n=this._oMeta.getODataEntityType(s.entityType,false);i=n.key.propertyRef;a=r.getObject()}if(a){this._getActionParameters(a,o,i);this._getAdditionalActionParameters(a,o,i);this._getActionRequestHeaders(r,a,o)}return o};n.prototype._callAction=function(e,t,r){var o=this;if(!r.urlParameters||!r.functionImport){r=this._prepareCallAction(e,t,r)}return new Promise(function(e,t){var s,n;s="/"+r.functionImport.name;n=o._getRequestCallbacks(e,t);o._oModel.callFunction(s,{method:r.functionImport.httpMethod,urlParameters:r.urlParameters,success:n.success,error:n.error,batchGroupId:r.batchGroupId,changeSetId:r.changeSetId,headers:r.headers,expand:r.expand})})};n.prototype._createFunctionContext=function(e,t){var r={};var o;var s;var n=this;r.result=new Promise(function(e,t){o=n._getRequestCallbacks(e,t)});this._getActionRequestHeaders(e,e.getObject(),t);s=this._oModel.callFunction("/"+t.functionImport.name,{method:t.functionImport.httpMethod,urlParameters:t.urlParameters,success:o.success,error:o.error,batchGroupId:t.batchGroupId,changeSetId:t.changeSetId,headers:t.headers,eTag:n._oModel.getETag(e.getPath()),expand:t.expand});r.context=s.contextCreated();r.abort=s.abort;return r};n.prototype._getActionRequestHeaders=function(e,t,r){var o;if(!r.headers){r.headers={}}if(!r.headers["If-Match"]&&r.functionImport["sap:action-for"]){o=this._oModel.getETag(null,e,t);if(o){r.headers["If-Match"]=o}}};n.prototype._getActionParameters=function(e,t,r){var o,n,a=r.length,u={},i;i=t.functionImport["sap:action-for"];n=function(e){if(t.functionImport.parameter){var r,o=t.functionImport.parameter.length;for(r=0;r<o;r++){if(t.functionImport.parameter[r].name===e){return true}}}return false};if(!t.functionImport.parameter&&i){s.error("Action doesn't have any parameters");throw new Error("Action doesn't have any parameters")}for(o=0;o<a;o++){if(n(r[o].name)){t.urlParameters[r[o].name]=e[r[o].name]}else if(i&&(r[o].name!="IsActiveEntity"||r[o].name!="DraftUUID")){s.error("Action does not contain a equally-named parameter for key property: "+r[o].name);throw new Error("Action does not contain a equally-named parameter for key property: "+r[o].name)}}return u};n.prototype._getAdditionalActionParameters=function(e,t,r){var o,n=0,a;var u=function(e){var t=0,o=r.length;for(t=0;t<o;t++){if(r[t].name===e){return true}}return false};if(t.functionImport.parameter){n=t.functionImport.parameter.length}if(n>r.length){for(o=0;o<n;o++){a=t.functionImport.parameter[o];if(!u(a.name)){var i=a.nullable==="true"?true:false;if(!t.urlParameters.hasOwnProperty(a.name)&&!i){s.error("Unknown parameter "+a.name);throw new Error("Unknown parameter "+a.name)}}}}};n.prototype._read=function(e,t,r){var o=this;var s,n;if(t.readParameters){n=t.readParameters}else if(t.urlParameters){n=t.urlParameters}if(r){return o._oModel.requestSideEffects(t.context,{groupId:t.batchGroupId,urlParameters:n})}return new Promise(function(r,a){s=o._getRequestCallbacks(r,a);o._oModel.read(e,{context:t.context,success:s.success,error:s.error,batchGroupId:t.batchGroupId,changeSetId:t.changeSetId,urlParameters:n})})};n.prototype._remove=function(e,t){var r=this;return new Promise(function(o,s){var n=r._getRequestCallbacks(o,s);r._oModel.remove(e,{success:n.success,error:n.error,eTag:"*",batchGroupId:t.batchGroupId,changeSetId:t.changeSetId,headers:t.headers})})};n.prototype._syncRemove=function(e,t,r,o){var s=this._getRequestCallbacks(r,o);return this._oModel.remove(e,{success:s.success,error:s.error,eTag:"*",batchGroupId:t.batchGroupId,changeSetId:t.changeSetId})};n.prototype._submitChanges=function(e){var t=this;if(!this._checkSubmit(e)){return Promise.resolve({context:e&&e.context})}if(this._oModel.bUseBatch==true){return new Promise(function(r,o){var s=t._getRequestCallbacks(r,o);t._oModel.submitChanges({batchGroupId:e.batchGroupId,success:s.success,error:s.error,eTag:e.eTag})})}else{return new Promise(function(r,o){var s=t._getRequestCallbacks(r,o);if(e.batchGroupId&&this._oModel.mDeferredRequests&&this._oModel.mDeferredRequests[e.batchGroupId]&&this._oModel.mDeferredRequests[e.batchGroupId].changes){var a=this._oModel.mDeferredRequests[e.batchGroupId].changes[e.changeSetId]||[];for(var u=0;u<a.length;u++){if(a[u].request._aborted==undefined||a[u].request._aborted==false){n.prototype.NonBatchEventHandlers[a[u].request.requestID]={success:s.success,error:s.error}}}}if(e.batchGroupId&&this._oModel.mDeferredRequests&&this._oModel.mDeferredRequests[e.batchGroupId]&&this._oModel.mDeferredRequests[e.batchGroupId].requests){var i=this._oModel.mDeferredRequests[e.batchGroupId].requests;for(var u=0;u<i.length;u++){if(i[u].request._aborted==undefined||i[u].request._aborted==false){n.prototype.NonBatchEventHandlers[i[u].request.requestID]={success:s.success,error:s.error}}}}t._oModel.submitChanges({batchGroupId:e.batchGroupId,eTag:e.eTag})}.bind(this))}};n.prototype._checkSubmit=function(e){if(this._oModel.hasPendingChanges()){e.pendingChanges=true;return true}if(e.forceSubmit&&e.forceSubmit==true){if(e.batchGroupId&&this._oModel.mDeferredRequests&&this._oModel.mDeferredRequests[e.batchGroupId]&&this._oModel.mDeferredRequests[e.batchGroupId].changes){var t=this._oModel.mDeferredRequests[e.batchGroupId].changes;var r=[];var o=[];var s;for(var n in t){if(t.hasOwnProperty(n)){r.push(n)}}for(var a=0;a<r.length;a++){s=this._oModel.mDeferredRequests[e.batchGroupId].changes[r[a]]||[];o=o.concat(s)}for(var a=0;a<o.length;a++){if(o[a].request._aborted==undefined||o[a].request._aborted==false){return true}}}if(e.batchGroupId&&this._oModel.mDeferredRequests&&this._oModel.mDeferredRequests[e.batchGroupId]&&this._oModel.mDeferredRequests[e.batchGroupId].requests){var u=this._oModel.mDeferredRequests[e.batchGroupId].requests||[];for(var a=0;a<u.length;a++){if(u[a].request._aborted==undefined||u[a].request._aborted==false){return true}}}}return false};n.prototype.triggerSubmitChanges=function(e){var t=this,r,o;e=e||{};e.successMsg=e.successMsg||"Action succeeded";e.failedMsg=e.failedMsg||"Action failed";o=function(e){t.fireEvent("fatalError",{response:e});throw e};r=function(){return t._submitChanges(e).then(function(r){var s=function(e,r){try{t._checkImplicitError({httpResponse:e,responseData:e.data},r);return t._normalizeResponse({httpResponse:e,responseData:e.data},true)}catch(e){o(e)}};var n;var a;var u=[];if(r&&r.responseData&&r.responseData.__batchResponses){if(r.responseData.__batchResponses.length==1&&r.responseData.__batchResponses[0].__changeResponses&&r.responseData.__batchResponses[0].__changeResponses.length==1){return s(r.responseData.__batchResponses[0].__changeResponses[0],e)}for(var i=0;i<r.responseData.__batchResponses.length;i++){n=r.responseData.__batchResponses[i];if(n.__changeResponses){for(var c=0;c<n.__changeResponses.length;c++){a=n.__changeResponses[c];u.push(s(a,e))}}else{return s(n,e)}}}else{try{t._checkImplicitError(r,e);return t._normalizeResponse(r,true)}catch(e){o(e)}}return u},function(e){var r=t._normalizeError(e);o(r)})};return this._oQueue.enqueue(r,{draftSave:e.draftSave})};n.prototype._updateEntity=function(e,t,r){var o=this;return new Promise(function(s,n){var a=o._getRequestCallbacks(s,n);var u={success:a.success,error:a.error,batchGroupId:"changes",changeSetId:"changes"+r};o._oModel.update(e,t,u)})};n.prototype.addOperationToQueue=function(e,t){this._oQueue.enqueue(e,t)};n.prototype.attachBeforeQueueItemProcess=function(e){this._oQueue._attachEvent("beforeQueueItemProcess",e)};n.prototype.detachBeforeQueueItemProcess=function(e){this._oQueue._detachEvent("beforeQueueItemProcess",e)};n.prototype.attachOnQueueCompleted=function(e){this._oQueue._attachEvent("onQueueCompleted",e)};n.prototype.detachOnQueueCompleted=function(e){this._oQueue._detachEvent("onQueueCompleted",e)};n.prototype.attachOnQueueFailed=function(e){this._oQueue._attachEvent("onQueueFailed",e)};n.prototype.detachOnQueueFailed=function(e){this._oQueue._detachEvent("onQueueFailed",e)};n.prototype.hasClientMessages=function(){if(this._oModelUtil.hasClientMessages()){return Promise.reject(new Error("Client messages detected"))}return null};n.prototype._normalizeResponse=function(e,t){if(e&&(e.httpResponse||e.responseData)){return{data:e.responseData,response:e.httpResponse||null,context:t?this._oModelUtil.getContextFromResponse(e.responseData):null}}return e};n.prototype._normalizeError=function(e){if(e&&e.message){return{response:e}}return e};n.prototype._returnPromiseAll=function(e){return Promise.all(e).then(function(e){if(e.length){return e[0]}return e})};n.prototype._atLeastOnePromiseResolved=function(e,t){var r=[];var o=Promise.resolve(null);var s=false;var n=e.length;var a=function(e){if(!t){r.push(e);s=true}else if(n-1>r.length&&t){r.push(e);s=true}};e.forEach(function(e,t){o=o.then(function(){return e}).then(a,function(e){r.push(e)},this)});return o.then(function(){if(s){return Promise.resolve(r)}else{return Promise.reject(r)}})};n.prototype._checkImplicitError=function(e,t){var r,o,s,n=false;if(this._mCounts.requestSent===1&&this._mCounts.requestCompleted===1){n=true}this._initCounts();if(t.pendingChanges&&n){if(e&&e.httpResponse){r=e.httpResponse}if(r&&r.response&&r.response.statusCode){s=parseInt(r.response.statusCode);if(s<200||s>299){o=this._parseError(r);throw this._normalizeError(o)}}}};n.prototype._parseError=function(e){var t={};if(e.message){t.message=e.message}if(e.response){t.statusCode=e.response.statusCode;t.statusText=e.response.statusText;t.headers=e.response.headers;t.responseText=e.response.body}return t};n.prototype._initCounts=function(){this._mCounts={requestSent:0,requestCompleted:0}};n.prototype._getRequestCallbacks=function(e,t){var r=this;this._mCounts.requestSent++;return{success:function(t,o){r._mCounts.requestCompleted++;e({responseData:t,httpResponse:o})},error:function(e){r._mCounts.requestCompleted++;t(e)}}};n.prototype.destroy=function(){if(this._oModelUtil){this._oModelUtil.destroy()}if(this._oQueue&&this._bOwnsQueue){this._oQueue.destroy()}this._oModel=null;this._oMeta=null;this._oDraftUtil=null;this._oModelUtil=null};return n},true);
/*
 * SAPUI5

(c) Copyright 2009-2020 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/ui/generic/app/transaction/DraftContext", ["sap/ui/base/Object","sap/ui/generic/app/util/ModelUtil"],function(t,e){"use strict";var r=t.extend("sap.ui.generic.app.transaction.DraftContext",{metadata:{publicMethods:["isDraftEnabled","isDraftRoot","hasDraft","hasDraftRoot","hasDraftValidationFunction","hasDraftPreparationAction","isTechnicalKey","isSemanticKey","getSemanticKey","checkUpdateOnChange","getODataDraftFunctionImportName","hasDraftAdministrativeData","hasSiblingEntity","destroy","hasPreserveChanges"]},constructor:function(t){if(!t){throw new Error("No model")}this._oModel=t;this._oMeta=t.getMetaModel();this._oModelUtil=new e(t);return this.getInterface()}});r.prototype.isDraftEnabled=function(t){var e=this._getODataDraftEntitySet(t);return!!(e&&e.isDraft)};r.prototype.isDraftRoot=function(t){var e=this._getODataDraftEntitySet(t);return!!(e&&e.isRoot)};r.prototype.hasDraft=function(t){var r=e.getEntitySetFromContext(t);if(r==null){return false}return this.isDraftEnabled(r)};r.prototype.hasDraftRoot=function(t){var r=e.getEntitySetFromContext(t);return this.isDraftRoot(r)};r.prototype.hasDraftValidationFunction=function(t){return!!this.getODataDraftFunctionImportName(t,"ValidationFunction")};r.prototype.hasDraftPreparationAction=function(t){return!!this.getODataDraftFunctionImportName(t,"PreparationAction")};r.prototype.isTechnicalKey=function(t,e){var r,a,o,i,n;if(!t){throw new Error("No entity set")}r=this._oMeta.getODataEntitySet(t);a=this._oMeta.getODataEntityType(r.entityType);o=a.key.propertyRef.length;if(Object.keys(e).length!==o){return false}for(i=0;i<o;i++){n=a.key.propertyRef[i].name;if(!e[n]){return false}}return true};r.prototype.isSemanticKey=function(t,e){var r,a,o;if(this.isDraftEnabled(t)){r=this.getSemanticKey(t);o=r.length;for(a=0;a<o;a++){if(!e[r[a].name]){return false}}return true}return false};r.prototype.getSemanticKey=function(t){var e,r,a,o=[],i,n;if(!t){throw new Error("No entity set")}e=this._oMeta.getODataEntitySet(t);r=this._oMeta.getODataEntityType(e.entityType);a=r["com.sap.vocabularies.Common.v1.SemanticKey"];if(a){n=a.length;for(i=0;i<n;i++){o.push({name:a[i].PropertyPath})}}return o};r.prototype.getODataDraftFunctionImportName=function(t,r){var a,o;a=e.getEntitySetFromContext(t);o=this._getODataDraftEntitySet(a);if(o.oDraft[r]&&o.oDraft[r].String){return o.oDraft[r].String}return null};r.prototype._getODataDraftEntitySet=function(t){var e={},r;if(!t){throw new Error("No entity set")}r=this._oMeta.getODataEntitySet(t);e.ODataEntitySet=r;if(r["com.sap.vocabularies.Common.v1.DraftRoot"]){e.isDraft=true;e.isRoot=true;e.oDraft=r["com.sap.vocabularies.Common.v1.DraftRoot"]}else if(r["com.sap.vocabularies.Common.v1.DraftNode"]){e.isDraft=true;e.isRoot=false;e.oDraft=r["com.sap.vocabularies.Common.v1.DraftNode"]}return e};r.prototype.hasDraftAdministrativeData=function(t){return this._hasNavigationProperty(t,"DraftAdministrativeData")};r.prototype.hasSiblingEntity=function(t){return this._hasNavigationProperty(t,"SiblingEntity")};r.prototype._hasNavigationProperty=function(t,e){var r,a,o,i;r=this._oMeta.getODataEntitySet(t);a=this._oMeta.getODataEntityType(r.entityType);if(a.navigationProperty){i=a.navigationProperty.length;for(o=0;o<i;o++){if(a.navigationProperty[o].name===e){return true}}}return false};r.prototype.checkUpdateOnChange=function(t,e){var r,a,o;if(!t){throw new Error("No entity set")}a=this._oMeta.getODataEntitySet(t);for(r in a){if(r.indexOf&&r.indexOf("com.sap.vocabularies.Common.v1.SideEffects")===0){o=a[r];if(o.SourceProperties&&o.SourceProperties.length){if(o.SourceProperties.length===1&&o.SourceProperties[0].PropertyPath){if(o.SourceProperties[0].PropertyPath===e){return true}}}}}return false};r.prototype.hasPreserveChanges=function(t){var e=this._oMeta.getODataFunctionImport(this.getODataDraftFunctionImportName(t,"EditAction"));if(e&&e.parameter){for(var r=0;r<e.parameter.length;r++){var a=e.parameter[r];if(a.mode==="In"&&a.name==="PreserveChanges"){return true}}}return false};r.prototype.destroy=function(){if(this._oModelUtil){this._oModelUtil.destroy()}this._oModelUtil=null;this._oModel=null;this._oMeta=null};return r},true);
/*
 * SAPUI5

(c) Copyright 2009-2020 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/ui/generic/app/transaction/DraftController", ["sap/ui/thirdparty/jquery","./BaseController","./DraftContext","sap/base/Log","sap/ui/model/Context","sap/ui/generic/app/util/ActionUtil"],function(jQuery,t,e,r,n,i){"use strict";var o=t.extend("sap.ui.generic.app.transaction.DraftController",{metadata:{publicMethods:["getDraftContext","getDraftForActiveEntity","createNewDraftEntity","createEditDraftEntity","validateDraftEntity","validateDraft","prepareDraft","prepareDraftEntity","saveAndPrepareDraftEntity","activateDraftEntity","isActiveEntity","hasActiveEntity","destroy","discardDraft"]},constructor:function(e,r){t.apply(this,[e,r]);this.sName="sap.ui.generic.app.transaction.DraftController";this._oContext=null}});o.prototype.getDraftContext=function(){if(!this._oContext){this._oContext=new e(this._oModel)}return this._oContext};o.prototype.createDraft=function(t,e,r){var n=this;if(!t){throw new Error("No entity set")}r=r||{};return new Promise(function(t,i){var o=function(e,r){t({responseData:e,httpResponse:r})};var a;var c=function(t){n._oModel.deleteCreatedEntry(a);i(t)};a=n._oModel.createEntry(e,{properties:r.predefinedValues,success:o,error:c,batchGroupId:r.batchGroupId,changeSetId:r.changeSetId,canonicalRequest:!!r.canonicalRequest,expand:r.expand})})};o.prototype.validateDraft=function(t,e){if(!t.getModel().getObject(t.getPath()).IsActiveEntity){var r=this.getDraftContext().getODataDraftFunctionImportName(t,"ValidationFunction");return this._callAction(r,t,e)}else{return Promise.resolve()}};o.prototype.prepareDraft=function(t,e){if(!t.getModel().getObject(t.getPath()).IsActiveEntity){var r;e=e||{};e.urlParameters=e.urlParameters||{};r=this.getDraftContext().getODataDraftFunctionImportName(t,"PreparationAction");return this._callAction(r,t,e)}else{return Promise.resolve()}};o.prototype.activateDraft=function(t,e,r){var n=this.prepareDraft(t,e);var i=this.getDraftContext().getODataDraftFunctionImportName(t,"ActivationAction");var o=this._callAction(i,t,r);return Promise.all([n,o])};o.prototype.editDraft=function(t,e){var r=this.getDraftContext().getODataDraftFunctionImportName(t,"EditAction");if(r){return this._callAction(r,t,e)}throw new Error(t?"No Edit action defined for the given context":"No context provided for the Edit action")};o.prototype.discardDraft=function(t,e){if(!t){throw new Error("No context")}var r={};jQuery.extend(true,r,e);var n=this.getDraftContext().getODataDraftFunctionImportName(t,"DiscardAction");if(n){return this._callAction(n,t,r)}return this._remove(t.getPath(),r)};o.prototype.getDraftForActive=function(t,e){var r=this;if(!t){throw new Error("No context")}e=e||{};e.urlParameters={$expand:"SiblingEntity"};return this._read(t.getPath(),e).then(function(t){if(t.responseData&&t.responseData.hasOwnProperty("SiblingEntity")){t.context=r._oModel.getContext("/"+r._oModel.getKey(t.responseData.SiblingEntity));return t}throw new Error("No draft entity could be found")})};o.prototype.getDraftForActiveEntity=function(t){var e,r,n=this,i={batchGroupId:"Changes",changeSetId:"Changes",noShowSuccessToast:true,forceSubmit:true};e=this.getDraftForActive(t,i).then(function(t){return t},function(t){throw n._normalizeError(t)});r=this.triggerSubmitChanges(i);return this._returnPromiseAll([e,r])};o.prototype.createNewDraftEntity=function(t,e,o,a,c){var s=this;c=c||{};c.fnSetBusy=c.fnSetBusy||Function.prototype;var u="Changes";var f={predefinedValues:o,batchGroupId:u,changeSetId:u,canonicalRequest:a,expand:c.sRootExpand};var h=new n(s._oModel,e);var d=s.getDraftContext().getODataDraftFunctionImportName(h,"NewAction");var l=d&&s._oMeta.getODataFunctionImport(d);var p,v;if(c.bUseNewActionForCreate&&l){v=function(){var e=s._oMeta.getODataEntityType(s._oMeta.getODataEntitySet(t).entityType)["com.sap.vocabularies.UI.v1.LineItem"];var r=e.find(function(t){return t.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"&&t.Action.String===d});var n=r?r.Label.String:"";return n};var g=sap.ui.getCore().getLibraryResourceBundle("sap.ui.generic.app");var y=v()||l["com.sap.vocabularies.Common.v1.Label"]&&l["com.sap.vocabularies.Common.v1.Label"].String||(c.oFunctionImportDialogInfo?c.oFunctionImportDialogInfo.getTitleText():g.getText("DIALOG_TITLE_NEW_ACTION_FOR_CREATE"));var m=c.oFunctionImportDialogInfo?c.oFunctionImportDialogInfo.getActionButtonText():g.getText("DIALOG_ACTION_BUTTON_NEW_ACTION_FOR_CREATE");var D={ResultIsActiveEntity:true};var E=s.getDraftContext().isDraftEnabled(t);var A=new i({controller:c.oController,contexts:[h],applicationController:c.oApplicationController,operationGrouping:undefined});var _={expand:c.sRootExpand};p=A.call(d,y,E,D,true,_,m).then(function(t){c.fnSetBusy(t.executionPromise);return t.executionPromise})}else{p=this.createDraft(t,e,f);c.fnSetBusy(p)}var C=p.then(function(t){var e=Array.isArray(t)?t[0]:t;return s._normalizeResponse(e.response||e,true)},function(t){var e=t?s._normalizeError(t):null;throw e});function x(t){var e,n,i,o=s._normalizeResponse(t,true);if(o.context){i=o.context.getObject()}if(!i){r.error("Activate function returned no entity");return Promise.reject(new Error("Activate function returned no entity"))}e=s._oDraftUtil.isActiveEntity(i);if(e){r.error("New draft entity is not marked as draft - isActiveEntity = "+e);return Promise.reject("New draft entity is not marked as draft - isActiveEntity = "+e)}n=s._oDraftUtil.hasDraftEntity(i);if(n){r.error("Wrong value for HasTwin of new draft entity - HasDraftEntity = "+n);return Promise.reject(new Error("Wrong value for HasTwin of new draft entity - HasDraftEntity = "+n))}return o}var I;if(c.bUseNewActionForCreate&&l){I=C.then(x)}else{var w={batchGroupId:u,changeSetId:u,noShowSuccessToast:true,forceSubmit:true,failedMsg:"New draft document could not be created"};I=this.triggerSubmitChanges(w).then(function(){return C.then(x)})}return this._returnPromiseAll([C,I])};o.prototype.createEditDraftEntity=function(t,e,n){var i,o,a=this,c={batchGroupId:"Changes",changeSetId:"Changes",successMsg:"Draft for document was created",failedMsg:"Could not create draft for document",forceSubmit:true,context:t,expand:n};if(e){c.urlParameters={PreserveChanges:true}}i=this.editDraft(t,c).then(function(t){var e,n,i;i=a._normalizeResponse(t,true);if(i.context){n=i.context.getObject()}if(!n){r.error("Activate function returned no entity");return Promise.reject(new Error("Activate function returned no entity"))}e=a._oDraftUtil.isActiveEntity(n);if(e){r.error("Edit function returned an entity which is not a draft instance - IsActiveEntity = "+e);return Promise.reject(new Error("Returned entity ist not a draft instance - IsActiveEntity = "+e))}return i},function(t){var e=a._normalizeError(t);throw e});o=this.triggerSubmitChanges(c);return this._returnPromiseAll([i,o])};o.prototype.validateDraftEntity=function(t){var e,r,n=this,i={batchGroupId:"Changes",changeSetId:"Changes",context:t,forceSubmit:true};e=this.validateDraft(t,i).then(function(t){return n._normalizeResponse(t,true)},function(t){var e=n._normalizeError(t);throw e});r=this.triggerSubmitChanges(i);return this._returnPromiseAll([e,r])};o.prototype.saveAndPrepareDraftEntity=function(t,e){var n,i,o=this;e=e||{};e.batchGroupId="Changes";e.changeSetId="Changes";e.successMsg="Saved";e.failedMsg="Save failed";e.context=t;e.forceSubmit=true;n=this.prepareDraft(t,e).then(function(t){var e,n,i;i=o._normalizeResponse(t,true);if(i.context){n=i.context.getObject()}if(!n){r.error("Activate function returned no entity");return Promise.reject(new Error("Activate function returned no entity"))}e=o._oDraftUtil.isActiveEntity(n);if(e){r.error("Prepare function returned an entity which is not a draft instance - IsActiveEntity = "+e);return Promise.reject(new Error("Returned entity ist not a draft instance - IsActiveEntity = "+e))}return i},function(t){var e=o._normalizeError(t);throw e});if(e.binding){e.binding.refresh(true,"Changes")}i=this.triggerSubmitChanges(e);return this._returnPromiseAll([n,i])};o.prototype.prepareDraftEntity=function(t){var e=this;return this.prepareDraft(t).then(function(t){var n,i;n=e._normalizeResponse(t,true);i=n.context.getObject();if(e._oDraftUtil.isActiveEntity(i)){r.error("Prepare function returned an entity which is not a draft instance - IsActiveEntity = "+true);return Promise.reject(new Error("Returned entity ist not a draft instance - IsActiveEntity = "+true))}return n},function(t){var r=e._normalizeError(t);throw r})};o.prototype.activateDraftEntity=function(t,e,n){var i,o;var a=this,c={batchGroupId:"Changes",successMsg:"Document activated",failedMsg:"Activation of document failed",forceSubmit:true,context:t};var s=jQuery.extend({},c);c.changeSetId="Preparation";s.changeSetId="Activation";s.expand=n;var u=e?"lenient":"strict";s.headers={Prefer:"handling="+u};var f=this._oModel.getETag(t.getPath());if(f){c.headers={"If-Match":"*"};s.headers["If-Match"]="*"}var h=new Promise(function(e,n){var u=function(){a.detachOnQueueCompleted(u);i=a.activateDraft(t,c,s).then(function(t){var e,n,i;var o=t[1];i=a._normalizeResponse(o,true);if(i.context){n=i.context.getObject()}if(!n){r.error("Activate function returned no entity");return Promise.reject(new Error("Activate function returned no entity"))}e=a._oDraftUtil.isActiveEntity(n);if(!e){r.error("Activate function returned an entity which is still a draft instance - IsActiveEntity = "+e);return Promise.reject(new Error("Returned entity is still a draft instance - IsActiveEntity = "+e))}return i},function(t){var e=a._normalizeError(t);throw e});o=a.triggerSubmitChanges(c);e(a._returnPromiseAll([i,o]))};if(a._oQueue._aQueue.length){a.attachOnQueueCompleted(u)}else{u(this)}});return h};o.prototype.isActiveEntity=function(t){if(this.getDraftContext().hasDraft(t)){return this._oDraftUtil.isActiveEntity(t.getObject())}return true};o.prototype.hasActiveEntity=function(t){return this._oDraftUtil.hasActiveEntity(t.getObject())};o.prototype.destroy=function(){if(this._oContext){this._oContext.destroy()}this._oContext=null;this._oModel=null;t.prototype.destroy.apply(this,[])};return o},true);
/*
 * SAPUI5

(c) Copyright 2009-2020 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/ui/generic/app/transaction/TransactionController", ["sap/ui/thirdparty/jquery","./BaseController","./DraftController","sap/ui/generic/app/util/ModelUtil","sap/base/util/extend","sap/base/Log"],function(jQuery,t,e,r,n,a){"use strict";var o=t.extend("sap.ui.generic.app.transaction.TransactionController",{metadata:{publicMethods:["destroy","setBatchStrategy","getDraftController","invokeAction","editEntity","deleteEntity","deleteEntities","propertyChanged","hasClientValidationErrors","resetChanges","getDefaultValues","getDefaultValuesFunction","updateMultipleEntities"]},constructor:function(e,r,n){t.apply(this,[e,r]);this.sName="sap.ui.generic.app.transaction.TransactionController";this._oDraft=null;n=n||{};if(!n.noBatchGroups){e.setDeferredGroups(["Changes"]);e.setChangeGroups({"*":{groupId:"Changes",changeSetId:"Changes",single:false}})}return this.getInterface()}});o.prototype.setBatchStrategy=function(t){var e,r=this._oModel.getChangeGroups();for(e in r){r[e].single=t}this._oModel.setChangeGroups(r)};o.prototype.getDraftController=function(){if(!this._oDraft){this._oDraft=new e(this._oModel,this._oQueue)}return this._oDraft};o.prototype.editEntity=function(t,e,n){var a=this;return new Promise(function(o){var i,s;i=a.getDraftController().getDraftContext();s=r.getEntitySetFromContext(t);if(i.isDraftEnabled(s)&&a._oDraftUtil.isActiveEntity(t.getObject())){return o(a.getDraftController().createEditDraftEntity(t,e,n))}return o({context:t})})};o.prototype.deleteEntity=function(t,e,r){var n,a,o=this,i,s,l;if(typeof t=="string"){i=t}else if(typeof t=="object"&&t instanceof sap.ui.model.Context){s=t;i=s.getPath()}e=e||{};jQuery.extend(e,{batchGroupId:"Changes",changeSetId:"Changes",successMsg:"Changes were discarded",failedMsg:"Discarding of changes failed",forceSubmit:true,context:s});var u=r?"lenient":"strict";e.headers={Prefer:"handling="+u};if(o._oModel.getObject(i)&&o._oDraftUtil.isActiveEntity(o._oModel.getObject(i))!==undefined&&!o._oDraftUtil.isActiveEntity(o._oModel.getObject(i))){if(!s){s=new sap.ui.model.Context(this._oModel,i)}l=o.getDraftController();n=l.discardDraft(s,e)}else{n=this._remove(i,e)}n.then(function(t){return o._normalizeResponse(t,true)},function(t){var e=o._normalizeError(t);throw e});a=this.triggerSubmitChanges(e);return this._returnPromiseAll([n,a])};o.prototype.deleteEntities=function(t,e){var r,n=[],a=this,o,i,s;e=e||{};var l=e.bIsStrict?"strict":"lenient";e.headers=e.headers||{};e.headers.Prefer="handling="+l;jQuery.extend(e,{batchGroupId:"Changes",changeSetId:"Changes",successMsg:"Changes were discarded",failedMsg:"Discarding of changes failed",forceSubmit:true});var u=function(t){return a._normalizeResponse(t,true)};var c=function(t){var e=a._normalizeError(t);throw e};for(var h=0;h<t.length;h++){i=null;if(typeof t[h]=="string"){o=t[h]}else if(typeof t[h]=="object"&&t[h]instanceof sap.ui.model.Context){i=t[h];o=i.getPath()}if(a._oModel.getObject(o)&&a._oDraftUtil.isActiveEntity(a._oModel.getObject(o))!==undefined&&!a._oDraftUtil.isActiveEntity(a._oModel.getObject(o))){e.changeSetId="Changes";if(!i){i=new sap.ui.model.Context(this._oModel,o)}s=a.getDraftController();r=s.discardDraft(i,e).then(u,c)}else{e.changeSetId="ActiveChanges";r=this._remove(o,e).then(u,c)}n.push(r)}r=this.triggerSubmitChanges(e);n.push(r);return this._atLeastOnePromiseResolved(n,true)};o.prototype.invokeAction=function(t,e,r){var n=this,a,o;a=this.hasClientMessages();if(a){return a}r={batchGroupId:"Changes",changeSetId:"Changes",successMsg:"Call of action succeeded",failedMsg:"Call of action failed",urlParameters:r.urlParameters,forceSubmit:true,context:e};a=this._callAction(t,e,r).then(function(t){return n._normalizeResponse(t,true)},function(t){var e=n._normalizeError(t);throw e});this._oModel.refresh(true,false,"Changes");o=this.triggerSubmitChanges(r);return this._returnPromiseAll([a,o])};o.prototype.resetChanges=function(t){this._oModel.resetChanges(t)};o.prototype.propertyChanged=function(t,e,r){var n,a,o={batchGroupId:"Changes",changeSetId:"Changes",binding:r};n=this.getDraftController().getDraftContext();if(n.checkUpdateOnChange(t,e)){a=r.getBoundContext();if(n.hasDraftPreparationAction(a)){return this.getDraftController().saveAndPrepareDraftEntity(a,o)}o.onlyIfPending=true;return this.triggerSubmitChanges(o)}o.onlyIfPending=true;o.noShowResponse=true;o.noBlockUI=true;return this.triggerSubmitChanges(o)};o.prototype.getDefaultValues=function(t,e,o,i){var s,l,u=t[0];if(!u&&!(u instanceof sap.ui.model.Context)){throw new Error("No context")}var c=r.getEntitySetFromContext(u);if(!c&&c===""){throw new Error("No EntitySet found in the current context")}var h=u.getModel().getMetaModel();var f=h.getODataEntityType(h.getODataEntitySet(c).entityType);if(o){f["navigationProperty"].forEach(function(t){if(t.name===o){s=t}});var g=h.getODataEntityType(h.getODataAssociationEnd(f,o).type);l=g.property}else if(i){s=h.getODataFunctionImport(i);l=s.parameter}else{s=h.getODataEntitySet(c);l=f.property}var d=this.getDefaultValuesFunction(s);if(d){var p=d.split("/")[1];if(t.length>1&&h.getODataFunctionImport(p).parameter){a.error("Parameterised DefaultValuesFunction not to be called with multiple selections");throw new Error("Parameterised DefaultValuesFunction not to be called with multiple selections")}var C={successMsg:"Call of action succeeded",failedMsg:"Call of action failed",urlParameters:null,forceSubmit:true,context:u,headers:{"If-Match":"*"}};var y=this._callAction(d,u,C).then(function(t){if(t.httpResponse.statusCode==="200"){var r=t.responseData[p]||t.responseData;var a={};l.forEach(function(t){if(r.hasOwnProperty(t.name)){a[t.name]=r[t.name]}});var o=[];e.forEach(function(t){var e={};for(var r in t){if(t[r]!==""){e[r]=t[r]}}o.push(n({},e,a))});return o}});var v=this.triggerSubmitChanges(C);return this._returnPromiseAll([y,v])}else{return e}};o.prototype.getDefaultValuesFunction=function(t){var e=t["com.sap.vocabularies.Common.v1.DefaultValuesFunction"];var r=e?"/"+e.String:null;return r};o.prototype.updateMultipleEntities=function(t){var e=[];var r=this;var n=function(t){return r._normalizeResponse(t,true)};var a=function(t){var e=r._normalizeError(t);throw e};for(var o=0;o<t.length;o++){var i=this._updateEntity(t[o].sContextPath,t[o].oUpdateData,o).then(n,a);e.push(i)}return this._atLeastOnePromiseResolved(e)};o.prototype.destroy=function(){t.prototype.destroy.apply(this,[]);if(this._oDraft){this._oDraft.destroy()}this._oDraft=null};return o},true);
/*
 * ! SAPUI5

(c) Copyright 2009-2020 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/ui/generic/app/util/ActionUtil", ["sap/ui/thirdparty/jquery","sap/ui/base/ManagedObject","sap/m/MessageBox","sap/ui/comp/smartform/SmartForm","sap/ui/comp/smartform/Group","sap/ui/comp/smartform/GroupElement","sap/ui/comp/smartfield/SmartField","sap/ui/comp/smartfield/SmartLabel","sap/m/Dialog","sap/ui/generic/app/util/ModelUtil","sap/m/VBox","sap/m/Text","sap/base/strings/formatMessage","sap/base/Log"],function(jQuery,e,t,r,a,o,n,i,s,l,u,p,c,m){"use strict";var f=e.extend("sap.ui.generic.app.util.ActionUtil",{metadata:{properties:{controller:{type:"object",group:"Misc",defaultValue:null},applicationController:{type:"object",group:"Misc",defaultValue:null},contexts:{type:"object",group:"Misc",defaultValue:null},successCallback:{type:"function",group:"Misc",defaultValue:null},operationGrouping:{type:"string",group:"Misc",defaultValue:null}}}});f.prototype._getObjectsDifference=function(e,t){var r=[];var a=Object.keys(e);for(var o=0;o<a.length;o++){if(e[a[o]]!==t[a[o]]){r.push(a[o])}}return r};f.prototype.call=function(e,r,a,o,n,i,s){var l=this;return new Promise(function(u,p){var m;l._oActionPromiseCallback={resolve:u,reject:p};l._sFunctionImportPath=e;var f=l.getController();if(!f||!f.getView()){p("No View Controller provided")}l._oMetaModel=f.getView().getModel().getMetaModel();var d=e.split("/")[1];l._oFunctionImport=l._oMetaModel.getODataFunctionImport(d);l._sFunctionImportLabel=r;l._sFunctionImportButtonActionButtonText=s||r;l._oSkipProperties=o||{};var g=function(){var e=l.getContexts();m=l._prepareParameters(e,a,i);m=m||[{}];m.expand=i?i.expand:undefined;var t=l.getApplicationController().getTransactionController().getDefaultValues(e,m.map(function(e){return e.parameterData}),undefined,d);if(t instanceof Promise){var r=function(e){for(var t=0;t<m.length;t++){m[t].propertiesOverridenByDefault=l._getObjectsDifference(m[t].parameterData,e[t]);m[t].parameterData=e[t]}l._initiateCall(m,a,n)};t.then(r,r)}else{l._initiateCall(m,a,n)}};if(!l._oFunctionImport){p("Unknown Function Import "+d)}if(l._isActionCritical()){var v="ACTION_CONFIRM|"+d;var h;var y=f.getOwnerComponent().getAppComponent&&f.getOwnerComponent().getAppComponent().getModel("i18n")&&f.getOwnerComponent().getAppComponent().getModel("i18n").getResourceBundle();if(y&&y.hasText(v)){h=y.getText(v)}else{h=sap.ui.getCore().getLibraryResourceBundle("sap.ui.generic.app").getText("ACTION_CONFIRM");h=c(h,l._sFunctionImportLabel)}t.confirm(h,{title:l._sFunctionImportLabel,onClose:function(e){if(e==="OK"){g()}else if(e==="CANCEL"){l._oActionPromiseCallback.reject()}},sClass:l._getCompactModeStyleClass()})}else{g()}})};f.prototype._getCompactModeStyleClass=function(){if(this.getController().getView().$().closest(".sapUiSizeCompact").length){return"sapUiSizeCompact"}return""};f.prototype._isActionCritical=function(){var e=this._oFunctionImport["com.sap.vocabularies.Common.v1.IsActionCritical"];if(!e){return false}if(e.Bool===undefined){return true}return this._toBoolean(e.Bool)};f.prototype._toBoolean=function(e){if(typeof e==="string"){var t=e.toLowerCase();return!(t=="false"||t==""||t==" ")}return!!e};f.prototype._prepareParameters=function(e,t,r){if(!Array.isArray(e)&&!e.length){return undefined}var a=[];e.forEach(function(e){var o=null;var n=e.getObject();if(e&&e.getPath()){var i=l.getEntitySetFromContext(e);var s=e.getModel().getMetaModel().getODataEntitySet(i,false);o=e.getModel().getMetaModel().getODataEntityType(s.entityType,false)}var u=this._getPropertyKeys(o);var p;var c={parameterData:{},additionalParameters:[],isDraftEnabled:t};if(this._oFunctionImport.parameter){for(var f=0;f<this._oFunctionImport.parameter.length;f++){var d=this._oFunctionImport.parameter[f];this._addParameterLabel(d,o);var g=d.name;var v=!!u[g];p=undefined;if(g==="ResultIsActiveEntity"){if(d.nullable!=="false"){continue}p=false}if(n&&n.hasOwnProperty(g)){p=n[g]}else if(v&&n&&this._oFunctionImport["sap:action-for"]){m.error("Key parameter of action not found in current context: "+g);throw new Error("Key parameter of action not found in current context: "+g)}c.parameterData[g]=r&&r[g]||p;var h=!!this._oSkipProperties[g];if(!h&&(!v||!this._oFunctionImport["sap:action-for"])&&d.mode.toUpperCase()=="IN"){c.additionalParameters.push(d)}}a.push(c)}else{a.push(c)}}.bind(this));return a};f.prototype._getPropertyKeys=function(e){var t={};if(e&&e.key&&e.key.propertyRef){for(var r=0;r<e.key.propertyRef.length;r++){var a=e.key.propertyRef[r].name;t[a]=true}}return t};f.prototype._setAdditionalParameters=function(e,t,r,a,o){e.forEach(function(e){if(t===e.name){if(e.hasOwnProperty("com.sap.vocabularies.UI.v1.Hidden")||o&&o.includes(t)){a.oModel.setProperty(t,r[t],a)}else{a.oModel.setProperty(t,undefined,a)}}})};f.prototype._initiateCall=function(e,t,r){var a=e[0];var o=r?"strict":"lenient";var i={Prefer:"handling="+o};if(a!=undefined&&a.additionalParameters&&a.additionalParameters.length==0){this._call(a.parameterData,a.isDraftEnabled,i)}else if(a!=undefined&&a.additionalParameters&&a.additionalParameters.length>0){var l=this;var u={urlParameters:{},headers:i,expand:e.expand};var p=this.getContexts();var c=this.getApplicationController()._getChangeSetFunc(p,this.getOperationGrouping());var m=p.map(function(e,t){u.changeSetId=c(t);return this.getApplicationController().getNewActionContext(this._sFunctionImportPath,e,u)}.bind(this));var f=m.map(function(e){return e.context});Promise.all(f).then(function(t){var o=t[0];var i=a.additionalParameters.map(function(e){return e.name});t.forEach(function(r,a){var o=e[a].parameterData;for(var n in o){if(t.length>1&&i.indexOf(n)>-1){l._setAdditionalParameters(e[a].additionalParameters,n,o,r,e[a].propertiesOverridenByDefault)}else{r.oModel.setProperty(n,o[n],r)}}});if(r){var u=l._buildParametersForm(a,o);var c=false;var f=new s({title:l._sFunctionImportLabel,content:[u.form],beginButton:new sap.m.Button({text:l._sFunctionImportButtonActionButtonText,type:"Emphasized",press:function(e){var o=u.form?u.form.check():Promise.resolve();o.then(function(e){if(u.hasNoClientErrors()){f.close();c=l._triggerActionPromise(m,p,a,t,r)}})}}),endButton:new sap.m.Button({text:sap.ui.getCore().getLibraryResourceBundle("sap.ui.generic.app").getText("ACTION_CANCEL"),press:function(){m[0].abort();f.close();l._oActionPromiseCallback.reject();c=true}}),afterClose:function(e){f.destroy();if(!c){l._oActionPromiseCallback.reject()}}}).addStyleClass("sapUiNoContentPadding");f.addStyleClass(l._getCompactModeStyleClass());f.setModel(o.oModel);if(this.getController().getView().getModel("@i18n")){f.setModel(this.getController().getView().getModel("@i18n"),"@i18n")}var d=f.getAggregation("content")[0].mAggregations["content"];var g=d.getFormContainers()[0].getFormElements();var v=true;for(var h=0;h<g.length;h++){var y=g[h].getFields()[0];if(y instanceof n&&y.getVisible()===true){v=false;break}}if(g.length===0||v){l._triggerActionPromise(m,p,a,t,r);f.destroy()}else{f.open()}}else{l._triggerActionPromise(m,p,a,t)}}.bind(this))}else{this._call(null,a!=undefined?a.isDraftEnabled:t,i)}};f.prototype._triggerActionPromise=function(e,t,r,a,o){var n=this;var i={};n._oActionPromiseCallback.resolve({executionPromise:n.getApplicationController()._newPromiseAll(e.map(function(e){return e.result})).then(function(e){n._bExecutedSuccessfully=n.getApplicationController()._checkAtLeastOneSuccess(t,e);if(o){e.forEach(function(e){e.userEnteredAdditionalParams=i})}if(n._bExecutedSuccessfully){return e}else{return Promise.reject(e)}},function(e){n._bExecutedSuccessfully=false;e.forEach(function(e){e.userEnteredAdditionalParams=i});throw e})});var s=a[0].getObject();r.additionalParameters.forEach(function(e){var t=s[e.name];if(e.type=="Edm.Boolean"&&t==undefined){s[e.name]=false;t=false}i[e.name]=t;a.forEach(function(r){r.oModel.setProperty(e.name,t,r)})});var l=n._sFunctionImportPath.split("/")[1];t.forEach(function(e,t){n.getApplicationController().submitActionContext(e,a[t],l)});if(o){return true}};f.prototype._call=function(e,t,r){var a=this.getContexts();var o={urlParameters:e,operationGrouping:this.getOperationGrouping(),triggerChanges:t,headers:r};var n=this.getController();var i=this.getApplicationController()||n.getApplicationController();var s=this;s._oActionPromiseCallback.resolve({executionPromise:i.invokeActions(this._sFunctionImportPath,a,o).then(function(e){s._bExecutedSuccessfully=true;return e},function(e){s._bExecutedSuccessfully=false;throw e})})};f.prototype._getActionParameterData=function(e){var t=[];var r=e.getObject("/");var a={};for(var o=0;o<this._oFunctionImport.parameter.length;o++){var n=this._oFunctionImport.parameter[o];var i=n.name;if(r.hasOwnProperty(i)){var s=r[i];if(s===undefined){if(!this._toBoolean(n.nullable)){if(n.type==="Edm.Boolean"){a[i]=false}else{t.push(n)}}}else{a[i]=s}}else{throw new Error("Unknown parameter: "+i)}}return{preparedParameterData:a,missingMandatoryParameters:t}};f.prototype._buildParametersForm=function(e,t){var s=new r({editable:true,validationMode:"Async"});s.setBindingContext(t);var l;var u=[];var p;var c;var m=new a;for(var f=0;f<e.additionalParameters.length;f++){var d=e.additionalParameters[f];if(d["com.sap.vocabularies.UI.v1.Hidden"]&&!d["com.sap.vocabularies.UI.v1.Hidden"].Path&&!(d["com.sap.vocabularies.UI.v1.Hidden"].Bool==="false")){continue}c=d["com.sap.vocabularies.Common.v1.ValueListWithFixedValues"]?"fixed-values":undefined;if(c==undefined){c=d["sap:value-list"]=="fixed-values"?"fixed-values":undefined}l=new n("ActionUtil-"+this._sFunctionImportPath.replace("/","-")+"-"+d.name,{value:"{"+d.name+"}",textLabel:this._getParameterName(d),width:"100%"});l.data("configdata",{configdata:{isInnerControl:false,path:d.name,entitySetObject:{},annotations:{valuelist:d["com.sap.vocabularies.Common.v1.ValueList"],valuelistType:c},modelObject:t.oModel,entityType:d.type,property:{property:d,typePath:d.name}}});if(d.nullable=="false"){l.setMandatory(true)}u.push(l);p=new i;p.setLabelFor(l);var g=new o;g.addElement(l);m.addGroupElement(g)}s.addGroup(m);var v=function(){var e=true;for(var t=0;t<u.length;t++){if(u[t].getValueState()!="None"){e=false;break}}return e};return{form:s,hasNoClientErrors:v}};f.prototype._getParameterName=function(e){return e["com.sap.vocabularies.Common.v1.Label"]?e["com.sap.vocabularies.Common.v1.Label"].String:e.name};f.prototype._addParameterLabel=function(e,t){if(t&&e&&!e["com.sap.vocabularies.Common.v1.Label"]){var r=this._oMetaModel.getODataProperty(t,e.name,false);if(r&&r["com.sap.vocabularies.Common.v1.Label"]){e["com.sap.vocabularies.Common.v1.Label"]=r["com.sap.vocabularies.Common.v1.Label"]}}};f.prototype.getFunctionImportLabel=function(){return this._sFunctionImportLabel};f.prototype.getExecutedSuccessfully=function(){return this._bExecutedSuccessfully};return f});
/*
 * SAPUI5

(c) Copyright 2009-2020 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/ui/generic/app/util/DraftUtil", [],function(){"use strict";var t=function(){};t.prototype.isActiveEntity=function(t){return t.IsActiveEntity};t.prototype.hasDraftEntity=function(t){return t.HasDraftEntity};t.prototype.hasActiveEntity=function(t){return t.HasActiveEntity};t.prototype.destroy=function(){};return t},true);
/*
 * ! SAPUI5

(c) Copyright 2009-2020 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/ui/generic/app/util/MessageUtil", ["sap/ui/core/ValueState","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/json/JSONModel","sap/m/MessageToast","sap/ui/core/syncStyleClass","sap/ui/core/Fragment"],function(e,t,r,s,a,n,o){"use strict";var i={badRequest:"400",unauthorized:"401",forbidden:"403",notFound:"404",methodNotAllowed:"405",preconditionFailed:"428",internalServerError:"500",notImplemented:"501",badGateway:"502",serviceUnavailable:"503",gatewayTimeout:"504",httpVersionNotSupported:"505"};var u={callAction:"callAction",addEntry:"addEntry",saveEntity:"saveEntity",deleteEntity:"deleteEntity",editEntity:"editEntity",modifyEntity:"modifyEntity",activateDraftEntity:"activateDraftEntity",saveAndPrepareDraftEntity:"saveAndPrepareDraftEntity",getCollection:"getCollection"};var g;function l(e){var t=[],r;var s=sap.ui.getCore().getMessageManager();var a=s.getMessageModel().getData();var n=[];for(var o=0;o<a.length;o++){r=a[o];var i=r.technicalDetails&&r.technicalDetails.statusCode==="404"&&r.type==="Error";if(r.persistent){if(i){n.push(r)}else{t.push(r)}}}return e?t.concat(n):t}function c(e,t){var r;r=function(r,s){var a;var i={onMessageDialogClose:function(){s.onMessageDialogClose();a.destroy()},onActionButtonPressed:function(){s.onActionButtonPressed();a.destroy()}};return o.load({name:r,controller:i}).then(function(r){if(t){n(t,e,r)}e.addDependent(e);return r})};return r}function p(t,r,n){var o=l();var i=sap.ui.getCore().getLibraryResourceBundle("sap.ui.generic.app");if(o.length===0){return Promise.resolve()}f();var u=e.None;for(var g=0;g<o.length&&u!==e.Error;g++){var p=o[g];switch(p.type){case sap.ui.core.MessageType.Error:u=e.Error;break;case sap.ui.core.MessageType.Warning:u=e.Warning;break;case sap.ui.core.MessageType.Success:if(u===sap.ui.core.ValueState.None){u=e.Success}break;default:break}}if(o.length===1&&(u===e.Success||u===e.None)){a.show(o[0].message);return Promise.resolve()}var d=typeof t==="function"?t:c(t.owner,t.contentDensityClass);var v,y,m;var T=function(){v.close();m.setProperty("/backButtonVisible",false);m.setProperty("/messages",[]);m.setProperty("/messageToGroupName",Object.create(null));y.navigateBack();m.getProperty("/resolve")()};var E={onMessageDialogClose:function(){T(m)},onActionButtonPressed:function(){m.getProperty("/actionButtonCallback")();T(m)},onBackButtonPress:function(){m.setProperty("/backButtonVisible",false);y.navigateBack()},onMessageSelect:function(){m.setProperty("/backButtonVisible",true)}};return d("sap.ui.generic.app.fragments.MessageDialog",E).then(function(e){v=e;y=v.getContent()[0];var t=v.getModel();var a=t&&t.getMetaModel();var g=false;var l=!!(n&&n.action);var c=Object.create(null);if(a){o.forEach(function(e){var r=e.getTarget();if(!r){return}if(r.lastIndexOf("/")>0){r=r.substring(0,r.lastIndexOf("/"))}var s=r.substring(1,r.indexOf("("));var n=s&&a.getODataEntitySet(s);var o=n&&a.getODataEntityType(n.entityType);var i=o&&o["com.sap.vocabularies.UI.v1.HeaderInfo"];var u=i&&i.Title&&i.Title.Value&&i.Title.Value.Path;var l=t.getProperty(r);var p=l&&l[u];if(p){c[e.getId()]=p;g=true}})}m=v.getModel("settings");if(!m){m=new s({genericGroupName:i.getText("GENERAL_TITLE"),backButtonVisible:false,cancelButtonText:i.getText("DIALOG_CANCEL"),closeButtonText:i.getText("DIALOG_CLOSE")});v.setModel(m,"settings")}m.setProperty("/showActionButton",l);if(l){m.setProperty("/actionButtonText",n.actionLabel);m.setProperty("/actionButtonCallback",n.action)}m.setProperty("/title",r||i.getText("DIALOG_TITLE"));m.setProperty("/messages",o);m.setProperty("/grouping",g);m.setProperty("/state",u);m.setProperty("/resolve",function(){return Promise.resolve()});m.setProperty("/messageToGroupName",c);v.open();return null})}function f(){var e=sap.ui.getCore().getMessageManager();var t=l(true);if(t.length>0){e.removeMessages(t)}}function d(e,t,r){var s=new sap.ui.core.message.Message({message:e,description:t,type:sap.ui.core.MessageType.Error,processor:r,target:"",persistent:true});sap.ui.getCore().getMessageManager().addMessages(s)}function v(e){var t;g=e&&e.url;if(g){g="/"+g.substring(0,g.indexOf(")")+1)}var r=sap.ui.getCore().getLibraryResourceBundle("sap.ui.generic.app").getText("ERROR_UNKNOWN");var s;if(e instanceof Error){if(e.message){r=e.message}}else if(e.response){if(e.response.message){r=e.response.message}var a=e.response.statusCode;s=!Number.isInteger(a)?Number(a):a;if(e.response.headers){for(var n in e.response.headers){if(n.toLowerCase()==="content-type"){var o=e.response.headers[n];if(o.toLowerCase().indexOf("application/json")===0){if(e.response.responseText){var i=JSON.parse(e.response.responseText);if(i&&i.error&&i.error.message&&i.error.message.value){r=i.error.message.value}}}else if(e.message){r=e.message}break}}}}var u=l();t={httpStatusCode:s,messageText:r,description:null,containsTransientMessage:u.length===0?false:true};return t}return{operations:u,httpStatusCodes:i,handleTransientMessages:p,removeTransientMessages:f,addTransientErrorMessage:d,parseErrorResponse:v,getTransientMessages:l}},true);
/*
 * SAPUI5

(c) Copyright 2009-2020 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/ui/generic/app/util/ModelUtil", [],function(){"use strict";var e=function(e){this._oModel=e};e.prototype.getContextFromResponse=function(e){var t="/"+this._oModel.getKey(e);return this._oModel.getContext(t)};e.getEntitySetFromContext=function(e){var t,o;if(!e){throw new Error("No context")}if(e&&e.getPath){t=e.getPath().split("(")[0];o=t.substring(1)}if(o==null){return null}else{return e.getModel().getMetaModel().getODataEntitySet(o)&&e.getModel().getMetaModel().getODataEntitySet(o).name}};e.prototype.hasClientMessages=function(){var e,t,o,r,n=0,s=0;e=sap.ui.getCore().getMessageManager();t=e.getMessageModel();o=t.getData();if(o){s=o.length}for(n=0;n<s;n++){r=o[n];if(r.processor.getMetadata()._sClassName==="sap.ui.core.message.ControlMessageProcessor"){return true}}return false};e.prototype.destroy=function(){this._oModel=null};return e},true);
/*
 * SAPUI5

(c) Copyright 2009-2020 SAP SE. All rights reserved
 */
sap.ui.predefine("sap/ui/generic/app/util/Queue", ["sap/ui/thirdparty/jquery"],function(jQuery){"use strict";var e=function(e){this._iMaxLength=e;this._aQueue=[];this._aEventHandlerRegistry=[]};e.prototype._attachEvent=function(e,t){if(typeof t!=="function"){throw new Error("Event handler must be a function")}this._aEventHandlerRegistry.push({event:e,handler:t})};e.prototype._detachEvent=function(e,t){for(var n=this._aEventHandlerRegistry.length;n--;){if(this._aEventHandlerRegistry[n].handler===t&&this._aEventHandlerRegistry[n].event===e){this._aEventHandlerRegistry.splice(n,1)}}};e.prototype._fireEvent=function(e,t){for(var n=0;n<this._aEventHandlerRegistry.length;n++){if(this._aEventHandlerRegistry[n].event===e){this._aEventHandlerRegistry[n].handler(t)}}};e.prototype._execNext=function(){var e,t=this;setTimeout(function(){t._aQueue.shift();e=t._aQueue[0];if(e){t._exec(e)}else{t._fireEvent("onQueueCompleted")}})};e.prototype._exec=function(e){var t=this,n=function(){t._execNext()};this._fireEvent("beforeQueueItemProcess",e.eventParameters);e.jqdeferred.resolve();e.wait.then(function(){e.wait.then(n)},jQuery.proxy(t._cancel,t))};e.prototype.enqueue=function(e,t){var n={fn:e,eventParameters:t};n.jqdeferred=jQuery.Deferred();n.defer=new Promise(function(e,t){n.jqdeferred.then(e,t)});n.wait=n.defer.then(e);if(!(this._iMaxLength===undefined)&&this._aQueue.length>=this._iMaxLength){n.jqdeferred.reject(new Error("Queue overflow: "+this._aQueue.length))}else{this._aQueue.push(n);if(this._aQueue.length===1){this._exec(n)}}return n.wait.then()};e.prototype._cancel=function(){var e,t,n=this._aQueue.length;for(t=0;t<n;t++){e=this._aQueue[t];e.jqdeferred.reject(new Error("Queue cancellation"))}this._fireEvent("onQueueFailed");this._aQueue=[]};e.prototype.destroy=function(){this._aQueue=[]};return e},true);
sap.ui.require.preload({
	"sap/ui/generic/app/fragments/MessageDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:layout="sap.ui.layout"><Dialog class="sapUiNoContentPadding" id="messageDialog" state="{settings>/state}" type="Message"\n\t\tshowHeader="true" horizontalScrolling="false" draggable="true" \n\t\tcontentHeight="440px" contentWidth="440px" verticalScrolling="false"><content><MessageView items="{settings>/messages}" showDetailsPageHeader="false" itemSelect="onMessageSelect" groupItems="{settings>/grouping}"><MessageItem type="{settings>type}" title="{settings>message}" description="{settings>description}" \n\t\t\t\t\t\t\tlongtextUrl="{settings>descriptionUrl}" groupName="{= ${settings>/messageToGroupName}[${settings>id}] || ${settings>/genericGroupName} }" /></MessageView></content><customHeader><Bar><contentMiddle><Text text="{settings>/title}" /></contentMiddle><contentLeft><Button icon="sap-icon://nav-back" visible="{settings>/backButtonVisible}" press="onBackButtonPress"/></contentLeft></Bar></customHeader><buttons><Button text="{settings>/actionButtonText}" visible="{settings>/showActionButton}" id="actionButton" press="onActionButtonPressed"  type="Emphasized"/><Button text="{=${settings>/showActionButton} ? ${settings>/cancelButtonText} : ${settings>/closeButtonText}}" id="Close" press="onMessageDialogClose"/></buttons></Dialog></core:FragmentDefinition>\n',
	"sap/ui/generic/app/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.ui.generic.app","type":"library","embeds":[],"applicationVersion":{"version":"1.109.0"},"title":"The SAPUI5 library contains classes that are mainly used in smart template applications, but can also be used in any Fiori/UI5 application that uses the OData protocol to communicate with an application server.","description":"The SAPUI5 library contains classes that are mainly used in smart template applications, but can also be used in any Fiori/UI5 application\\n                   that uses the OData protocol to communicate with an application server.","resources":"resources.json","offline":true},"sap.ui":{"technology":"UI5","supportedThemes":[]},"sap.ui5":{"dependencies":{"minUI5Version":"1.109","libs":{"sap.ui.core":{"minVersion":"1.109.0"},"sap.ui.comp":{"minVersion":"1.109.0","lazy":true},"sap.m":{"minVersion":"1.109.0"},"sap.fe.navigation":{"minVersion":"1.109.0","lazy":true}}},"library":{"i18n":{"bundleUrl":"messagebundle.properties","supportedLocales":["","ar","bg","ca","cs","cy","da","de","el","en","en-GB","en-US-sappsd","en-US-saprigi","en-US-saptrc","es","es-MX","et","fi","fr","fr-CA","hi","hr","hu","id","it","iw","ja","kk","ko","lt","lv","ms","nl","no","pl","pt","pt-PT","ro","ru","sh","sk","sl","sv","th","tr","uk","vi","zh-CN","zh-TW"]},"content":{"controls":[],"elements":[],"types":[],"interfaces":[]}}}}'
});
//# sourceMappingURL=library-preload.js.map
